# =============================================================================
# SignalForge Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values:
#   cp .env.example .env
#
# NEVER commit .env to version control.
# =============================================================================

# --- Application ---
APP_NAME=SignalForge
# Set to false in production
DEBUG=true

# --- Database (PostgreSQL, psycopg3 driver) ---
# Primary connection string (postgresql+psycopg:// for psycopg3 driver)
# On macOS, Postgres often uses your username (not "postgres"). Example:
DATABASE_URL=postgresql+psycopg://user:password@localhost:5432/signalforge_dev
# Or with password: postgresql+psycopg://user:password@localhost:5432/signalforge_dev

# Fallback PostgreSQL connection params (used if DATABASE_URL is not set)
# PGHOST=localhost
# PGPORT=5432
# PGUSER=postgres
# PGPASSWORD=
# PGDATABASE=signalforge_dev
# DB_CONNECT_TIMEOUT=10

# --- Security ---
# Generate a strong random key: python3 -c "import secrets; print(secrets.token_urlsafe(64))"
SECRET_KEY=your-secret-key-change-in-production
# Token for cron/internal job endpoints (scripts/run_scan.sh, scripts/run_briefing.sh)
# Required in production. Generate: python3 -c "import secrets; print(secrets.token_urlsafe(32))"
INTERNAL_JOB_TOKEN=your-cron-secret-for-internal-endpoints

# --- Pipeline (Phase 3) ---
# Per-workspace rate limit for /internal/* jobs (ingest, score, derive, update_lead_feed).
# Max jobs per hour per job_type per workspace. 0 = disabled.
# Default 10. Set to 0 for tests or if cron runs more than 10x/hour.
# WORKSPACE_JOB_RATE_LIMIT_PER_HOUR=10

# --- LLM ---
LLM_PROVIDER=openai
LLM_API_KEY=your-openai-api-key
LLM_MODEL=gpt-4o-mini

# Model roles (issue #15): reasoning=analysis, json=cheap, outreach=conversational
LLM_MODEL_REASONING=gpt-4o
LLM_MODEL_JSON=gpt-4o-mini
LLM_MODEL_OUTREACH=gpt-4o-mini
LLM_TIMEOUT=60
LLM_MAX_RETRIES=3
# Legacy: LLM_MODEL used for all roles if above are unset

# --- Briefing ---
# Time for daily briefing (24h format, used by cron schedule)
BRIEFING_TIME=08:00
# Enable email delivery of briefings
BRIEFING_EMAIL_ENABLED=false
# Frequency: daily (default) or weekly. When weekly, BRIEFING_DAY_OF_WEEK applies.
BRIEFING_FREQUENCY=daily
# Day for weekly briefings: 0=Monday .. 6=Sunday
BRIEFING_DAY_OF_WEEK=0
# Note: Settings page (DB) overrides take precedence when set (issue #29)

# --- Email / SMTP ---
# Required only if BRIEFING_EMAIL_ENABLED=true
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=signalforge@example.com
BRIEFING_EMAIL_TO=you@example.com
